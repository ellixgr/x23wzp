<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Grupos WhatsApp Gr√°tis - Link de Amizade, Zoeira e Namoro</title>
<meta name="description" content="Encontre os melhores Grupos WhatsApp de Zoeira, Amizade, Namoro e muito mais. Links de convite gr√°tis, atualizados e verificados. Participe!">

<meta name="google-site-verification" content="7_kxuIgRIneJ9rU2-lGbHNXVAwnVYqAiN_ZOTfQ18io" />

<link rel="canonical" href="https://ellixgr.github.io/x23wzp/">

<meta property="og:title" content="Grupos whatsapp‚≠ê">
<meta property="og:description" content="Convite para conversar em grupo">
<meta property="og:image" content="https://i.postimg.cc/XYVkJ1YH/1769082090576-(1).jpg">
<meta property="og:url" content="https://ellixgr.github.io/x23wzp/">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="theme-color" content="#b78cff">

<style>
/* Reset e Estilos B√°sicos */
*{box-sizing:border-box;margin:0;padding:0}

/* CORRE√á√ÉO DO RODAP√â: BODY com flex-direction: column e min-height: 100vh */
body{
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    color:#222; /* Volta para o texto escuro */
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    background:#ebebeb;
}

/* Bot√£o da Conta na aba Meus Grupos */
.btn-ir-conta {
    background: #00bfff;
    color: white;
    text-align: center;
    padding: 12px;
    border-radius: 8px;
    font-weight: bold;
    text-decoration: none;
    display: block;
    width: 90%;
    max-width: 380px;
    margin: 10px auto 20px auto;
    box-shadow: 0 4px 10px rgba(0, 191, 255, 0.3);
    border: none;
    cursor: pointer;
}


/* --- Estilos do Pop-up de An√∫ncio --- */
#popup-anuncio {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    display: none; 
    justify-content: center;
    align-items: center;
    z-index: 9999999 !important; /* AGORA NADA PASSA NA FRENTE */
    transition: opacity 0.3s ease;
}

#popup-content {
    position: relative;
    max-width: 90%;
    width: 350px; /* Largura m√°xima do pop-up */
    background: none;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
    overflow: hidden;
}

#popup-content a {
    display: block;
}

#popup-content img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 15px;
    cursor: pointer;
}

#close-popup-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #e74c3c; /* Cor vermelha para o bot√£o */
    color: white;
    border: 2px solid white;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    text-align: center;
    line-height: 26px; /* Centraliza o 'X' */
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.2s;
    z-index: 10;
}

#close-popup-btn:hover {
    background: #c0392b;
}
/* --- Fim dos Estilos do Pop-up --- */

/* --- Header e Categorias --- */
header{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    padding:12px 10px;
    background:#fff;
    color:#000;
    text-align:center;
    z-index:1000; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
    transition: transform 0.3s ease-in-out;
    /* Ele come√ßa escondido para cima */
    transform: translateY(-100%); 
}

/* Classe que o JavaScript vai colocar para fazer ele aparecer */
header.header-visible {
    transform: translateY(0) !important;
}

/* ALTERADO: Cor do t√≠tulo para azul escuro */
header h1 {
    font-size: 24px;
    font-weight: 900;
    background: linear-gradient(45deg, #00008b, #b78cff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

header p{margin-top:4px;text-shadow:none;} 

#categorias{margin-top:8px;display:flex;justify-content:center;gap:6px;flex-wrap:wrap}
.cat-btn{background:rgba(0,0,0,0.05);border:1px solid rgba(0,0,0,0.1);border-radius:20px;color:#000;font-size:13px;padding:5px 11px;cursor:pointer;transition:all .2s}
.cat-btn:hover{background:rgba(0,0,0,0.1)}
.cat-btn.active{background:#b78cff;border-color:#b78cff;color:#fff;} 

/* --- Menu Lateral (√çcone Hamb√∫rguer) --- */
.menu-icon{position:fixed;top:20px;right:20px;font-size:28px;z-index:99998;background:rgba(255,255,255,0.8);color:#000;padding:6px 12px;border-radius:10px;cursor:pointer; line-height: 1; box-shadow: 0 2px 5px rgba(0,0,0,0.2);}
.menu{position:fixed;top:0;right:-300px;width:250px;height:100%;background:rgba(255,255,255,0.95);padding:30px 20px;transition:right .3s;z-index:1200; box-shadow: -2px 0 10px rgba(0,0,0,0.1);}
.menu.open{right:0}
.menu .close-btn{position:absolute;top:15px;right:20px;background:none;border:none;color:#000;font-size:26px;cursor:pointer}
.menu h2{margin-top:50px;color:#b78cff;border-bottom:1px solid #b78cff;padding-bottom:5px;text-align:left}
.menu a {
    display: block;
    text-decoration: none;
    color: #333 !important;
    padding: 12px;
    border-radius: 12px;
    margin-top: 15px;
    text-align: left;
    font-size: 16px;
    font-weight: 600;
    transition: all 0.3s ease;
}

.menu a:hover {
    transform: scale(1.02);
    filter: brightness(0.9);
}


/* --- Lista de Grupos --- */
#lista-grupos{width:100%;max-width:420px;padding:70px 20px 0;display:flex;flex-direction:column;align-items:center;gap:35px;overflow:visible}
/* ESTILO DO AN√öNCIO */
#anuncio-afiliado {
    width: 100%;
    max-width: 420px; 
    margin: 25px auto; 
    display: block;
    border-radius: 15px;
    overflow: hidden; 
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); 
    transition: transform 0.2s;
    background: none; 
}
#anuncio-afiliado:hover {
    transform: scale(1.03);
    box-shadow: 0 6px 20px rgba(183,140,255,0.4); 
}

#anuncio-afiliado img {
    width: 80%; 
    max-width: 100%;
    height: auto; 
    display: block;
    margin: 0 auto;
}


/* Quadrado azul de aviso nos Meus Grupos */
.aviso-meus-grupos {
    background: #e3f2fd; 
    border: 1px solid #90caf9;
    border-radius: 12px;
    padding: 15px;
    margin: 20px auto;
    width: 90%;
    max-width: 380px;
    color: #1565c0; 
    font-size: 13px;
    line-height: 1.5;
    text-align: left;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}


/* --- NOVO ESTILO CARD IGUAL A FOTO --- */
.grupo {
    width: 100%;
    max-width: 380px;
    background: #fff;
    border-radius: 10px;
    overflow: visible;
    display: flex;
    flex-direction: column;
    text-decoration: none;
    color: #333;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    margin-bottom: 25px;
    border: 1px solid #eee;
    position: relative;
}

.card-topo {
    position: relative;
    width: 100%;
    height: 180px; /* Altura da imagem */
}

.grupo img.foto {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 0;
}

/* Foto Fixa no Topo Esquerdo - N√£o some nunca */
.img-topo-esquerda {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    border: 2px solid #b78cff;
    object-fit: cover;
    cursor: pointer;
    position: fixed; /* MUDOU PARA FIXED */
    top: 20px;       /* Alinhado com o meio do cabe√ßalho */
    left: 15px;
    z-index: 10001;  /* Fica acima de TUDO */
}


.badge-categoria {
    position: absolute;
    bottom: 10px;
    left: 10px;
    background: rgba(0,0,0,0.7);
    color: #fff;
    padding: 3px 10px;
    font-size: 11px;
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: bold;
}

.card-corpo {
    padding: 15px;
    text-align: left;
}

.grupo span.nome {
    font-size: 18px;
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
    color: #000;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 90%;
}

.descricao {
    font-size: 13px;
    color: #666;
    margin-bottom: 15px;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    height: 36px;
}

.btn-falso-entrar {
    background: #25d366;
    color: white;
    text-align: center;
    padding: 12px;
    border-radius: 5px;
    font-weight: bold;
    text-transform: uppercase;
}

.estrela-vip {
    position: absolute;
    top: 5px; /* Ajustado para ficar dentro da foto */
    right: 5px; /* Ajustado para ficar dentro da foto */
    color: #ffd700;
    font-size: 40px; /* Tamanho melhor para mobile */
    z-index: 5; /* Garante que fica na frente da imagem */
    filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.8));
    text-shadow: 2px 2px 0px #b8860b;
    pointer-events: none;
    animation: estrelaBrilhando 1.5s infinite alternate ease-in-out;
}


@keyframes estrelaBrilhando {
    from { transform: rotate(20deg) scale(1); }
    to { transform: rotate(20deg) scale(1.1); }
}

.grupo.vip::before{
    content:"‚≠ê";
    position:absolute;
    left:10px; 
    top:10px;
    transform: none;
    font-size:18px; 
    color:#ffd700;
    text-shadow:0 0 6px #ffda00,0 0 10px #ffb700;
    animation:none;
}
.grupo.vip .categoria{color: #e6b800; background: rgba(255,215,0,0.3);}

/* Estilos para Bot√µes de A√ß√£o (Editar/Excluir) */
.grupo-acoes-wrapper { 
    display: flex; 
    gap: 8px; 
    margin-top: 10px; 
    width: 100%;
    justify-content: center; 
    flex-wrap: wrap; 
}
.grupo-acoes-wrapper button {
    border: none;
    padding: 6px 15px;
    border-radius: 20px; 
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    transition: background 0.2s;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    min-width: 95px; 
    color: #fff; 
}

/* --- AQUI ENTRA O BRILHO DO CART√ÉO VIP --- */
.grupo.vip {
    border: 2px solid #ffd700 !important; /* Borda Dourada */
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); /* Sombra inicial */
    animation: brilhoPulsante 2s infinite alternate; /* Faz o brilho "viver" */
}

/* Anima√ß√£o para o brilho ficar pulsando */
@keyframes brilhoPulsante {
    from {
        box-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
        border-color: #ffd700;
    }
    to {
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        border-color: #fff1a0; /* Cor um pouco mais clara no auge do brilho */
    }
}


.grupo-acoes-wrapper button:hover {
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

.grupo-acoes-wrapper button.edit-btn {
    background: rgba(46, 204, 113, 0.9); 
}
.grupo-acoes-wrapper button.edit-btn:hover {
    background: rgba(46, 204, 113, 1);
}
.grupo-acoes-wrapper button.delete-btn {
    background: rgba(231, 76, 60, 0.9); 
}
.grupo-acoes-wrapper button.delete-btn:hover {
    background: rgba(231, 76, 60, 1);
}

/* Ajuste no estilo dos cliques */
.grupo .cliques {
    font-size: 13px;
    color: #b78cff; 
    text-shadow: none; 
}

/* --- Rodap√© (FOOTER) CORRIGIDO - Garante que o footer fique no final do conte√∫do/tela --- */
footer{
    color:#666; 
    text-align:center;
    padding:14px 10px 40px;
    font-size:14px;
    line-height:1.6;
    text-shadow: none; 
    width: 100%;
}
footer a{color:#b78cff;text-decoration:none}

/* Modal Geral e Termos (Ajustado para Fundo Branco) */
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:none;justify-content:center;align-items:center;z-index:5000}
.modal-content{background:#fff;padding:20px;border-radius:20px;max-width:400px;width:90%;text-align:center;color:#000;position:relative; box-shadow: 0 4px 15px rgba(0,0,0,0.3);}
.modal-content h3{margin-bottom:15px}
.modal-content input, .modal-content select{width:90%;margin:5px 0;padding:8px;border-radius:10px;border:1px solid #ccc;background:#f9f9f9;color:#000;}
.modal-content button{padding:10px 20px;margin-top:10px;border:none;border-radius:15px;background:#b78cff;color:#fff;cursor:pointer;transition:0.2s}
.modal-content button:hover{background:#a56be0}
.modal .close-modal{position:absolute;top:10px;right:15px;font-size:22px;cursor:pointer;color:#000;}

/* Estilo para o conte√∫do do Modal VIP */
#vipModal > .modal-content {
    animation: fadeZoom 0.25s ease;
    border: 1px solid gold;
    padding: 25px;
    max-width: 350px;
    width: 90%; 
}

/* Estilo espec√≠fico para o bot√£o de Copiar e Enviar Comprovante */
.pix-copy-btn {
    background: #00bfff; 
    color: #fff;
    font-weight: bold;
    margin-top: 15px;
    padding: 12px 25px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    transition: background 0.2s;
}
.pix-copy-btn:hover {
    background: #0099cc;
}

.whatsapp-btn {
    background: #25d366; 
    color: #fff;
    font-weight: bold;
    margin-top: 15px;
    padding: 12px 25px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    text-decoration: none;
    display: block;
    width: 90%;
    margin-left: auto;
    margin-right: auto;
    transition: background 0.2s;
}
.whatsapp-btn:hover {
    background: #1eaa54;
}

/* Estilo para o formul√°rio de envio */
#modalEnvioGrupo .modal-content {
    background: #fff;
    border: 1px solid #b78cff;
    padding: 30px;
}
#modalEnvioGrupo h3 {
    color: #b78cff;
    border-bottom: 2px solid #b78cff;
    padding-bottom: 10px;
}
#modalEnvioGrupo .modal-content input,
#modalEnvioGrupo .modal-content select {
    background: #f0f0f0;
    color: #000;
    border: 1px solid #ccc;
    transition: border-color 0.2s;
}
#modalEnvioGrupo .modal-content input:focus,
#modalEnvioGrupo .modal-content select:focus {
    border-color: #b78cff;
    outline: none;
}
#grupoFotoLabel {
    display: block;
    background: #ccc;
    color: #000;
    padding: 10px;
    border-radius: 10px;
    cursor: pointer;
    margin: 10px auto;
    width: 90%;
    transition: background 0.2s;
}
#grupoFotoLabel:hover {
    background: #aaa;
}
#grupoFotoUpload {
    display: none; 
}
#previewContainer {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 15px;
}
#previewFoto {
    width: 80px;
    height: 80px;
    border-radius: 50%; 
    object-fit: cover; 
    border: 3px solid #b78cff;
    box-shadow: 0 0 10px rgba(183,140,255,0.5);
}
#modalEnvioGrupo #salvarGrupo {
    background: #2ecc71;
    font-size: 16px;
}
#modalEnvioGrupo #salvarGrupo:hover {
    background: #27ae60;
}

</style>
</head>
<body>

<div id="popup-anuncio">
    <div id="popup-content">
        <span id="close-popup-btn">X</span>
        <a href="" id="popup-link-dinamico" target="_blank">
            <img src="" id="popup-img-dinamica" alt="An√∫ncio">
        </a>
    </div>
</div>
<header style="display: flex; justify-content: center; align-items: center; padding: 0 15px; background: #fff; border-bottom: 1px solid #ddd; position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; height: 85px;">
    <img src="https://i.postimg.cc/1tMNbvyP/image.png" class="img-topo-esquerda" onclick="window.location.href='https://ellixgr.github.io/x23wzp/'">

    <div style="display: flex; gap: 10px; justify-content: center; align-items: center;">
        <button onclick="abrirModalEnvio()" style="background: #25d366; color: #fff; border: none; padding: 12px 18px; font-weight: 800; font-size: 11px; border-radius: 8px; cursor: pointer; text-transform: uppercase; line-height: 1.2; min-width: 110px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">ENVIAR<br>GRUPO</button>

        <button onclick="document.getElementById('meusGrupos').click()" style="background: #232f3e; color: #fff; border: none; padding: 12px 18px; font-weight: 800; font-size: 11px; border-radius: 8px; cursor: pointer; text-transform: uppercase; line-height: 1.2; min-width: 110px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">MEUS<br>GRUPOS</button>
    </div>
</header>

<div style="margin-top: 105px; padding: 15px; width: 100%; max-width: 420px; margin-left: auto; margin-right: auto;">

    <div id="categorias" style="display: flex; gap: 15px; overflow-x: auto; padding-bottom: 10px; text-align: center; margin-bottom: 20px;">
        <div class="cat-btn active" data-cat="Todos" style="min-width: 60px; cursor: pointer;"><span>üè†</span><p style="font-size: 10px; font-weight: bold;">Todos</p></div>
        <div class="cat-btn" data-cat="Amizade" style="min-width: 60px; cursor: pointer;"><span>üë•</span><p style="font-size: 10px; font-weight: bold;">Amizade</p></div>
        <div class="cat-btn" data-cat="Namoro" style="min-width: 60px; cursor: pointer;"><span>‚ù§Ô∏è</span><p style="font-size: 10px; font-weight: bold;">Namoro</p></div>
        <div class="cat-btn" data-cat="Zoeira" style="min-width: 60px; cursor: pointer;"><span>ü§°</span><p style="font-size: 10px; font-weight: bold;">Zoeira</p></div>
    </div>

    <h1 style="text-align: center; font-size: 26px; margin-bottom: 20px; color: #333;">Grupos de WhatsApp</h1>

    <div id="lista-grupos" style="width: 100%; display: flex; flex-direction: column; gap: 20px;"></div>
</div>
<div class="menu-icon" id="menuBtn">‚ò∞</div> 
<div class="menu" id="sideMenu">
  <button class="close-btn" id="closeBtn">‚ùå</button>
  <h2>MENU</h2>
  
  <a href="https://br.shp.ee/5q1d37e?smtt=0.0.9" target="_blank" 
     style="background: #fff5eb; border: 2px solid #ff9800; box-shadow: 0 0 12px rgba(255, 152, 0, 0.6);">
     üõçÔ∏è Loja-acess√≥rios
  </a>

  <a href="#" id="meusGrupos" 
     style="background: #fdf5e6; border: 2px solid #f4a460; box-shadow: 0 0 12px rgba(244, 164, 96, 0.6);">
     üìù Meus Grupos
  </a>

  <a href="#" id="enviarGrupo" 
     style="background: #f0fff4; border: 2px solid #2ecc71; box-shadow: 0 0 15px rgba(46, 204, 113, 0.7);">
     üöÄ Enviar Meu Grupo
  </a>

  <a href="https://ellixgr.github.io/x23wzp/ads" target="_blank" 
     style="background: #f0f8ff; border: 2px solid #00bfff; box-shadow: 0 0 12px rgba(0, 191, 255, 0.6);">
     üá∫üá∏N√∫meros virtuaisüáßüá∑
  </a> 

  <a href="#" id="comprarVipBtn" 
     style="background: #fffdf0; border: 2px solid #ffd700; box-shadow: 0 0 18px rgba(255, 215, 0, 0.8); font-weight: bold;">
     ‚≠ê Ativar Vip
  </a>
  
  <a href="https://wa.me/5521977231625?text=Ol√°! Preciso de suporte." target="_blank" 
     style="background: #f5fff9; border: 2px solid #25d366; box-shadow: 0 0 10px rgba(37, 211, 102, 0.4); color: #128c7e !important; font-weight: bold;">
     üü¢ Suporte WhatsApp
  </a>
</div>

<footer>
  <a href="#" id="termosLink">Termos de Uso</a>
  <a href="#" id="privacidadeLink">Politica de Privacidade</a><br>
  ¬© 2024 - 2030 - <a href="https://ellixgr.github.io/x23wzp/" target="_blank">gruposWhats</a>
</footer>


<div id="modalTermos" class="modal">
  <div class="modal-content">
    <span class="close-modal">‚ùå</span>
    <h3 id="modalTitulo"></h3>
    <div id="modalTexto" style="text-align:left; max-height:300px; overflow-y:auto;"></div>
  </div>
</div>

<div id="vipModal" class="modal">
  <div class="modal-content" style="padding: 20px; max-width: 380px; overflow: hidden; position: relative;">
    <span class="close-modal" id="fecharVipIcon" style="z-index: 10; position: absolute; right: 15px; top: 10px;">‚ùå</span>
    <h3 style="color: #ffd700; margin-bottom: 20px;">‚≠ê Planos VIP ‚≠ê</h3>

    <div id="carrossel-pagamento" style="display: flex; overflow-x: auto; scroll-snap-type: x mandatory; gap: 20px; padding-bottom: 15px; scrollbar-width: none; -webkit-overflow-scrolling: touch;">
      
      <div style="min-width: 100%; scroll-snap-align: center; display: flex; flex-direction: column; align-items: center;">
        <div style="background: #fff8e1; border: 2px solid #ffd700; padding: 15px; border-radius: 15px; width: 90%;">
          <h4 style="color: #000;">Plano Bronze</h4>
          <p style="font-size: 20px; font-weight: bold; color: #2ecc71;">R$ 5,00</p>
          <p style="font-size: 13px; color: #666;">VIP por <b>1 DIA</b></p>
          <img src="https://files.catbox.moe/kvyq5d.jpg" style="width: 150px; margin: 10px 0; border-radius: 8px;">
          <button onclick="copiarPixManual('00020126580014BR.GOV.BCB.PIX013689a5c070-cdd1-443b-997d-0cbbcf80e2de52040000530398654045.005802BR5918Elias da Conceicao6009SAO PAULO62140510lRM9nLzEht6304AA83', this)" class="pix-copy-btn" style="width: 100%; font-size: 12px;">üìã Copiar C√≥digo Pix</button>
        </div>
      </div>

      <div style="min-width: 100%; scroll-snap-align: center; display: flex; flex-direction: column; align-items: center;">
        <div style="background: #f0f8ff; border: 2px solid #00bfff; padding: 15px; border-radius: 15px; width: 90%;">
          <h4 style="color: #000;">Plano Prata</h4>
          <p style="font-size: 20px; font-weight: bold; color: #2ecc71;">R$ 10,00</p>
          <p style="font-size: 13px; color: #666;">VIP por <b>2 DIAS</b></p>
          <img src="https://i.postimg.cc/c1trwChX/Screenshot-20260130-205925-(1).jpg" style="width: 150px; margin: 10px 0; border-radius: 8px;">
          <button onclick="copiarPixManual('00020126720014BR.GOV.BCB.PIX013689a5c070-cdd1-443b-997d-0cbbcf80e2de0210ativar vip520400005303986540510.005802BR5918Elias da Conceicao6009SAO PAULO62140510FCbk23CQPL6304CE8C', this)" class="pix-copy-btn" style="width: 100%; background: #00bfff; font-size: 12px;">üìã Copiar C√≥digo Pix</button>
        </div>
      </div>
    </div>

    <div style="width: 60px; height: 5px; background: #e0e0e0; border-radius: 10px; margin: 5px auto 20px; position: relative; overflow: hidden;">
        <div id="indicador-scroll" style="width: 30px; height: 100%; background: #ffd700; position: absolute; left: 0; transition: left 0.2s ease-out; border-radius: 10px;"></div>
    </div>

    <a href="https://wa.me/5521977231625?text=Ol√°, fiz o Pix VIP. Segue o comprovante!" target="_blank" class="whatsapp-btn" style="font-size: 13px; margin-top: 0;">
       Enviar Comprovante üì±
    </a>
    
    <button id="fecharVipBtn" style="display:none;">Fechar</button>
  </div>
</div>

<div id="modalAvisoVip" class="modal">
  <div class="modal-content">
    <span class="close-modal" id="fecharAvisoVip">‚ùå</span>
    <h3 id="avisoVipTitulo"></h3>
    <p id="avisoVipMensagem"></p>
    <p id="avisoVipCodigo" style="font-size:24px; font-weight:bold; color:#b78cff; margin-top:15px;"></p>
  </div>
</div>

<div id="modalEnvioGrupo" class="modal">
  <div class="modal-content">
    <span class="close-modal" onclick="document.getElementById('modalEnvioGrupo').style.display = 'none';" style="position:absolute; top:10px; right:15px; font-size:22px; cursor:pointer;">‚ùå</span>
    <h3>Enviar Grupo</h3>
    
    <input type="text" id="grupoNome" placeholder=" Nome do grupo" maxlength="25" required>
    <input type="text" id="grupoLink" placeholder=" Link do grupo (https://chat.whatsapp.com/...)" required>
    <textarea id="grupoDescricao" placeholder=" Descri√ß√£o curta (D√™ detalhes sobre o grupo)" maxlength="100" style="width: 90%; margin: 5px 0; padding: 10px; border-radius: 10px; border: 1px solid #ccc; background: #f9f9f9; font-family: inherit; resize: none; height: 60px;"></textarea>
          
    <select id="grupoCategoria" required>
      <option value=""> Selecione a Categoria</option>
      <option value="Amizade">Amizade</option>
      <option value="Namoro">Namoro</option>
      <option value="Zoeira">Zoeira</option>
    </select>
    
    <div id="setor-vip-input" style="background: #fff8e1; padding: 10px; border-radius: 10px; border: 1px dashed #ffd700; margin-top: 10px;">
        <input type="text" id="grupoVipCodigo" placeholder="Cole seu C√≥digo VIP aqui (Opcional)" style="width: 100%; padding: 10px; border: 1px solid #ffd700; border-radius: 8px;">
        <p id="msg-acordando" style="display:none; font-size: 11px; color: #b8860b; margin-top: 5px;">Validando c√≥digo...</p>
    </div>

    <div id="previewContainer" style="margin-top: 15px; text-align: center;">
        <input type="file" id="grupoFotoUpload" accept="image/*" style="display: none;">
        <label for="grupoFotoUpload" id="grupoFotoLabel" style="display: block; background: #eee; padding: 10px; border-radius: 8px; cursor: pointer; margin-bottom: 10px;"> 
            üì∏ Escolha a foto do grupo
        </label>
        <img id="previewFoto" src="https://files.catbox.moe/9qdwuz.webp" alt="Pr√©via" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid #b78cff;">
    </div>
    
    <button id="salvarGrupo" onclick="salvarNovoGrupo()">
  ENVIAR GRUPO
</button>

    <p id="mensagemEnvio" style="margin-top:10px; color:#2ecc71; font-weight:bold; display:none;">‚úÖ Grupo enviado com sucesso!</p>
  </div> 
</div>



<script type="module">
// Vers√µes mais recentes e modulares do Firebase
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, onValue, runTransaction, set, remove, push, get } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

if (!localStorage.getItem('usuarioID')) {
    localStorage.setItem('usuarioID', 'user_' + Math.random().toString(36).substr(2, 9));
}
const usuario = localStorage.getItem('usuarioID');

// Credenciais do Firebase (MANTIDAS)
const firebaseConfig = {
  apiKey: "AIzaSyDsrYjO2yVTemKqwmJRzNjh5sfaMalPqhE",
  authDomain: "cliques-4a2c1.firebaseapp.com",
  databaseURL: "https://cliques-4a2c1-default-rtdb.firebaseio.com",
  projectId: "cliques-4a2c1",
  storageBucket: "cliques-4a2c1.firebase storage.app",
  messagingSenderId: "903875153255",
  appId: "1:903875153255:web:ff3cf25e059b10d665b3c2",
  measurementId: "G-BQ7FWRJD"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// Vari√°veis de Elementos (MANTIDAS)
const menu = document.getElementById('sideMenu');
const enviarBtn = document.getElementById('enviarGrupo');
const meusBtn = document.getElementById('meusGrupos');
const modalTermos = document.getElementById('modalTermos');
const closeModalTermos = modalTermos.querySelector('.close-modal');
const modalTitulo = document.getElementById('modalTitulo');
const modalTexto = document.getElementById('modalTexto');
const header = document.querySelector('header'); // NOVO: Refer√™ncia ao Header

const vipModal = document.getElementById('vipModal');
const fecharVipIcon = document.getElementById('fecharVipIcon');
const fecharVipBtn = document.getElementById('fecharVipBtn');

const modalAvisoVip = document.getElementById('modalAvisoVip');
const avisoVipTitulo = document.getElementById('avisoVipTitulo');
const avisoVipMensagem = document.getElementById('avisoVipMensagem');
const avisoVipCodigo = document.getElementById('avisoVipCodigo');
document.getElementById('fecharAvisoVip').onclick = () => modalAvisoVip.style.display = 'none';

// Elementos Pix
const pixCodeField = document.getElementById('pix-code-field');
const copyPixBtn = document.getElementById('copy-pix-btn');


// VARI√ÅVEL GLOBAL ESSENCIAL 
let todosGrupos = []; 

// REGEX CORRIGIDO: Mais robusto para links de convite do WhatsApp
const WHATSAPP_LINK_REGEX = /^https?:\/\/(chat\.whatsapp\.com|whatsapp\.com\/chat)\/[A-Za-z0-9_-]{20,30}$/i;


// ================== CRIA√á√ÉO E MANIPULA√á√ÉO DO MODAL DE GRUPO (MANTIDO) ================== //

const modal = document.getElementById('modalEnvioGrupo'); 
const previewFoto = document.getElementById("previewFoto");
const fotoInput = document.getElementById("grupoFotoUpload");
const salvarGrupoBtn = document.getElementById('salvarGrupo');

salvarGrupoBtn.addEventListener('mouseover', () => salvarGrupoBtn.style.background = '#27ae60');
salvarGrupoBtn.addEventListener('mouseout', () => salvarGrupoBtn.style.background = '#2ecc71');

fotoInput.addEventListener("change", (e) => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = (ev) => (previewFoto.src = ev.target.result);
    reader.readAsDataURL(file);
  }
});
window.salvarNovoGrupo = async function() {
    const nome = document.getElementById('grupoNome').value.trim();
    const link = document.getElementById('grupoLink').value.trim();
    const categoria = document.getElementById('grupoCategoria').value;
    const descricao = document.getElementById('grupoDescricao').value.trim();
    const codigoVip = document.getElementById('grupoVipCodigo').value.trim(); 
    const foto = document.getElementById('previewFoto').src;
    const meuID = localStorage.getItem('usuarioID'); // Pega o ID local

    if (!nome || !link || !categoria) {
        window.showAlert('‚ùå Preencha os campos obrigat√≥rios!');
        return;
    }

    const btn = document.getElementById('salvarGrupo');
    btn.disabled = true;
    btn.textContent = "PROCESSANDO...";

    try {
        const response = await fetch("https://x23wzp.onrender.com/salvar-grupo", {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                nome, 
                link, 
                categoria, 
                descricao, 
                foto, 
                dono: meuID, // Importante: usar o mesmo nome que o filtro
                codigoVip: codigoVip
            })
        });

        const res = await response.json();

        if (res.success) {
            window.showAlert('‚úÖ Grupo enviado para an√°lise do ADM!');
            document.getElementById('modalEnvioGrupo').style.display = 'none';
        } else {
            window.showAlert('‚ùå ' + res.message);
        }
    } catch (error) {
        window.showAlert('‚ùå Erro ao conectar com o servidor.');
    } finally {
        btn.disabled = false;
        btn.textContent = "ENVIAR GRUPO";
    }
};



window.abrirEdicao = function(g) {
    const modal = document.getElementById('modalEnvioGrupo');
    modal.style.display = 'flex';
    document.getElementById('grupoNome').value = g.nome;
    document.getElementById('grupoLink').value = g.link;
    document.getElementById('grupoDescricao').value = g.descricao;
    document.getElementById('grupoCategoria').value = g.categoria;
    document.getElementById('previewFoto').src = g.foto;

    modal.querySelector('h3').textContent = "Editar Grupo";
    const btnSalvar = document.getElementById('salvarGrupo');
    btnSalvar.textContent = "SALVAR ALTERA√á√ïES";
    btnSalvar.onclick = () => window.executarEdicao(g.key);
};

window.executarEdicao = async function(idDoGrupo) {
    // Pega os valores dos campos do modal de edi√ß√£o
    const nome = document.getElementById('grupoNome').value.trim();
    const link = document.getElementById('grupoLink').value.trim();
    const descricao = document.getElementById('grupoDescricao').value.trim();
    const categoria = document.getElementById('grupoCategoria').value;
    const foto = document.getElementById('previewFoto').src;
    const codigoVip = document.getElementById('grupoVipCodigo') ? document.getElementById('grupoVipCodigo').value.trim() : "";
    const donoLocal = localStorage.getItem('usuarioID');

    // Monta o pacote de dados para o Render
    const dados = { 
        key: idDoGrupo, 
        donoLocal, 
        nome, 
        link, 
        descricao, 
        categoria, 
        foto,
        codigoVip 
    };

    try {
        const response = await fetch("https://x23wzp.onrender.com/editar-grupo", {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(dados)
        });

        const res = await response.json();

        if (res.success) {
            window.showAlert('‚úÖ Altera√ß√µes salvas com sucesso!');
            document.getElementById('modalEnvioGrupo').style.display = 'none';
            // Opcional: recarregar a p√°gina ou a lista de grupos aqui
            setTimeout(() => location.reload(), 1500);
        } else {
            window.showAlert('‚ùå Erro: ' + (res.message || 'Falha ao editar'));
        }
    } catch (error) {
        console.error("Erro na edi√ß√£o:", error);
        window.showAlert('‚ùå Erro de conex√£o com o servidor Render.');
    }
};


// *** FUN√á√ÉO EXCLUIR GRUPO PERSONALIZADA (SEM CAIXA FEIA) ***
window.excluirGrupo = function(grupo){
  const modalConfirm = document.getElementById('confirmDeleteModal');
  const btnSim = document.getElementById('confirmBtnSim');
  const btnNao = document.getElementById('confirmBtnNao');

  modalConfirm.style.display = 'flex';

  btnNao.onclick = () => modalConfirm.style.display = 'none';

  btnSim.onclick = async () => {
    modalConfirm.style.display = 'none';
    try {
      const response = await fetch("https://x23wzp.onrender.com/excluir-grupo", {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
              key: grupo.key, 
              donoLocal: localStorage.getItem('usuarioID') 
          })
      });
      const res = await response.json();
      if (res.success) window.showAlert('‚úÖ Grupo exclu√≠do!');
      else window.showAlert('‚ùå Voc√™ n√£o tem permiss√£o.');
    } catch (error) {
      window.showAlert('‚ùå Erro no servidor.');
    }
  };
}

async function carregarGrupos() {
  try {
    // Chama o seu servidor Render em vez do Firebase direto
    const response = await fetch("https://x23wzp.onrender.com/listar-grupos");
    const grupos = await response.json();
    
    todosGrupos = grupos;

    // Filtra pela categoria ativa
    const catAtiva = document.querySelector('.cat-btn.active').dataset.cat.toLowerCase();
    let listaFiltrada = todosGrupos;
    
    if (catAtiva !== 'todos') {
      listaFiltrada = todosGrupos.filter(g => g.categoria?.toLowerCase() === catAtiva);
    }
    
    renderizarGrupos(listaFiltrada);
  } catch (error) {
    console.error("Erro ao carregar grupos via servidor:", error);
  }
}

// Para manter o site atualizado, pe√ßa os grupos a cada 30 segundos
setInterval(carregarGrupos, 30000);



// ================== RENDERIZAR GRUPOS (CORRIGIDO) ================== //

function renderizarGrupos(lista, modoMeusGrupos = false) {
  const container = document.getElementById('lista-grupos');
  container.innerHTML = '';

  if (modoMeusGrupos) {
      const btnConta = document.createElement('a');
      btnConta.href = "https://ellixgr.github.io/x23wzp/conta";
      btnConta.className = "btn-ir-conta";
      btnConta.innerHTML = "üë§ ACESSAR MINHA CONTA";
      container.appendChild(btnConta);
  }

  if (lista.length === 0) {
    container.innerHTML += '<p style="color:#555; text-align:center;">Nenhum grupo encontrado.</p>';
    return;
  }

  const usuario = localStorage.getItem('usuarioID');
  const listaOrdenada = ordenarGrupos([...lista]);

  listaOrdenada.forEach((g, index) => {
    const meuID = localStorage.getItem('usuarioID');
const agora = Date.now();

// Verifica se √© dono (checa todos os campos poss√≠veis que o banco pode ter)
const isOwner = (String(g.dono || "") === String(meuID) || String(g.uid || "") === String(meuID) || String(g.usuarioID || "") === String(meuID));

// Valida√ß√£o Real do VIP: checa se o campo √© true E se o tempo n√£o acabou
const expiraEm = Number(g.vipExpiraEm) || 0;
const vipAtivo = (g.vip === true || g.vip === "true") && (expiraEm === 0 || expiraEm > agora);

    const wrapper = document.createElement('div');
    wrapper.style.cssText = "display:flex; flex-direction:column; align-items:center; width:100%;";

    const card = document.createElement('div');
    // Adiciona a classe 'vip' se for vip, para ativar a borda dourada do CSS
    // Isso garante que se for VIP, a classe "vip" seja aplicada para ativar a borda dourada do CSS
card.className = 'grupo' + (vipAtivo ? ' vip' : '');
    
    card.innerHTML = `
      <div class="card-topo">
        ${vipAtivo ? '<div class="estrela-vip">‚òÖ</div>' : ''}
        <img src="${g.foto}" class="foto" alt="Foto do Grupo">
        <span class="badge-categoria">${g.categoria || 'Geral'}</span>
      </div>
      <div class="card-corpo">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <span class="nome">${g.nome}</span>
            <span style="font-size: 11px; font-weight: bold; color: #b78cff; background: #f0e6ff; padding: 4px 8px; border-radius: 6px;">
               üöÄ ${g.cliques || 0} ACESSOS
            </span>
        </div>
        <p class="descricao">${g.descricao || "Clique para entrar no grupo!"}</p>
        <div class="btn-container-dinamico"></div>
      </div>
    `;

    const btnContainer = card.querySelector('.btn-container-dinamico');

    if (modoMeusGrupos && isOwner) {
        const agora = Date.now();
        const expira = g.vipExpiraEm || 0; // Isso aqui define a vari√°vel que estava faltando!
        const vipAtivo = (g.vip === true || g.vip === "true") && (expira > agora);
        
        if (expira > agora) {
            const btnVipStatus = document.createElement('div');
            btnVipStatus.className = "btn-falso-entrar";
            btnVipStatus.style.background = "linear-gradient(90deg, #ffd700, #ffae00)";
            btnVipStatus.style.color = "#000";
            btnVipStatus.style.fontWeight = "bold";
            btnContainer.appendChild(btnVipStatus);

            const atualizarVip = () => {
                const tempoRestante = expira - Date.now();
                if (tempoRestante <= 0) {
                    btnVipStatus.innerHTML = "‚≠ê VIP EXPIRADO";
                    clearInterval(intervaloVip);
                } else {
                    const h = Math.floor(tempoRestante / 3600000);
                    const m = Math.floor((tempoRestante % 3600000) / 60000);
                    const s = Math.floor((tempoRestante % 60000) / 1000);
                    btnVipStatus.innerHTML = `‚≠ê VIP ATIVO: ${h}h ${m}m ${s}s`;
                }
            };
            const intervaloVip = setInterval(atualizarVip, 1000);
            atualizarVip();
        } else if (expira > 0 && expira <= agora) {
            // Se realmente expirou (tempo antigo no banco)
            const btnExpirado = document.createElement('div');
            btnExpirado.className = "btn-falso-entrar";
            btnExpirado.style.background = "#e67e22";
            btnExpirado.style.color = "#fff";
            btnExpirado.innerHTML = "‚ùå VIP EXPIRADO (RENOVE)";
            btnContainer.appendChild(btnExpirado);
        } else {
            // Se n√£o tem VIP nenhum, mostra o IMPULSO normal
            const esperaImpulso = 3600000;
            const ultimoImp = g.ultimoImpulso || 0;
            const passou = agora - ultimoImp;

            if (passou < esperaImpulso) {
                const btnTimer = document.createElement('div');
                btnTimer.className = "btn-falso-entrar";
                btnTimer.style.background = "#bdc3c7";
                btnContainer.appendChild(btnTimer);
                const intImp = setInterval(() => {
                    const r = esperaImpulso - (Date.now() - ultimoImp);
                    if (r <= 0) {
                        clearInterval(intImp);
                        renderizarGrupos();
                    } else {
                        const segs = Math.floor(r / 1000);
                        btnTimer.innerHTML = `üöÄ AGUARDE ${Math.floor(segs/60)}m ${segs%60}s`;
                    }
                }, 1000);
            } else {
                const btnImp = document.createElement('div');
                btnImp.className = "btn-falso-entrar";
                btnImp.style.background = "#f1c40f";
                btnImp.innerHTML = "üöÄ IMPULSIONAR AGORA";
                btnImp.onclick = () => impulsionarGrupo(g.key);
                btnContainer.appendChild(btnImp);
            }
        }
    }
 else {
        // Dentro da fun√ß√£o renderizarGrupos, onde cria o btnEntrar:
// Dentro da fun√ß√£o renderizarGrupos, onde voc√™ cria o btnEntrar:
const btnEntrar = document.createElement('div');
btnEntrar.className = "btn-falso-entrar";
btnEntrar.innerHTML = "ENTRAR NO GRUPO";

btnEntrar.onclick = async (e) => {
    e.preventDefault();

    // Fun√ß√£o que faz tudo: conta o clique e d√° a moeda no servidor
    const contabilizarEIr = async () => {
        try {
            // AQUI EST√Å O SEGREDO: Manda pro Render em vez de pro Firebase
            fetch("https://x23wzp.onrender.com/ganhar-moeda", {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ usuarioID: usuario }) // 'usuario' j√° est√° definido no seu c√≥digo
            });
            
            // Tamb√©m conta o clique no grupo para as estat√≠sticas
            fetch("https://x23wzp.onrender.com/contar-clique", {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ key: g.key })
            });
        } catch (err) { 
            console.error("Erro ao falar com o servidor:", err); 
        }
        
        // Redireciona para o WhatsApp
        window.location.href = g.link;
    };

    if (vipAtivo) {
        contabilizarEIr();
    } else {
        // Se n√£o for VIP, tem o protetor de link (An√∫ncio)
        window.open('https://www.effectivegatecpm.com/afavj9a2y?key=5875f3c51a281666d53e659422973930', '_blank');
        btnEntrar.style.pointerEvents = "none";
        btnEntrar.style.background = "#e74c3c";
        
        let cont = 5;
        const timer = setInterval(() => {
            cont--;
            btnEntrar.textContent = `AGUARDE... ${cont}s`;
            if (cont <= 0) {
                clearInterval(timer);
                btnEntrar.textContent = "‚úÖ ENTRAR AGORA";
                btnEntrar.style.background = "#2ecc71";
                btnEntrar.style.pointerEvents = "auto";
                btnEntrar.onclick = contabilizarEIr;
            }
        }, 1000);
    }
};



        btnContainer.appendChild(btnEntrar);
    }

    wrapper.appendChild(card);

    if (isOwner && modoMeusGrupos) {
      const box = document.createElement('div');
      box.className = 'grupo-acoes-wrapper';
      box.innerHTML = `
        <button class="edit-btn" onclick="abrirEdicao(${JSON.stringify(g).replace(/"/g, '&quot;')})">‚úèÔ∏è Editar</button>
        ${!vipAtivo ? `<button style="background:#daa520" onclick="abrirEdicao(${JSON.stringify(g).replace(/"/g, '&quot;')})">üî• Ser VIP</button>` : ''}
        <button class="delete-btn" onclick="excluirGrupo(${JSON.stringify(g).replace(/"/g, '&quot;')})">üóëÔ∏è Excluir</button>
      `;
      wrapper.appendChild(box);
    }


    container.appendChild(wrapper);

    if (!modoMeusGrupos) {
        if (index === 1) renderAnuncioTikTok(container);
        if (index === 4) renderAnuncioPopular(container);
    }
  });

  if (modoMeusGrupos) {
      const aviso = document.createElement('div');
      aviso.className = 'aviso-meus-grupos';
      aviso.innerHTML = `üíæ <b>Seus grupos ficam salvos neste dispositivo.</b>`;
      container.appendChild(aviso);
  }
}


function ordenarGrupos(lista) {
    const agora = Date.now();
    return lista.sort((a, b) => {
        if (a.vip && !b.vip) return -1;
        if (!a.vip && b.vip) return 1;
        const impulsoA = (agora - (a.ultimoImpulso || 0)) < 3600000;
        const impulsoB = (agora - (b.ultimoImpulso || 0)) < 3600000;
        if (impulsoA && !impulsoB) return -1;
        if (!impulsoA && impulsoB) return 1;
        return (b.cliques || 0) - (a.cliques || 0);
    });
}

window.impulsionarGrupo = async function(key) {
    try {
        const response = await fetch("https://x23wzp.onrender.com/impulsionar-grupo", {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                key: key, 
                donoLocal: localStorage.getItem('usuarioID') 
            })
        });
        const res = await response.json();
        if (res.success) {
            window.showAlert("üöÄ Grupo Impulsionado para o topo!");
            // N√£o precisa recarregar, o onValue do Firebase atualizar√° a tela
        } else {
            window.showAlert("‚ùå Erro ao impulsionar.");
        }
    } catch (e) {
        window.showAlert("‚ùå Erro de conex√£o com o servidor.");
    }
};


function renderAnuncioTikTok(container) {
    const ad1 = document.createElement('div');
    ad1.style.cssText = "width:100%; max-width:380px; margin-bottom: 20px;";
    ad1.innerHTML = `<div style="cursor: pointer; border-radius: 15px; overflow: hidden; border: 2px solid #b78cff;" onclick="copiarECaminhar()"><img src="https://i.postimg.cc/dQjhrMsK/1769968251192-(1).jpg" style="width: 100%; display: block;"></div>`;
    container.appendChild(ad1);
}

function renderAnuncioPopular(container) {
    const ad2 = document.createElement('div');
    ad2.style.cssText = "width:100%; max-width:380px; margin-bottom: 20px;";
    ad2.innerHTML = `<a href="https://soupopular.net/ref/bagau" target="_blank" style="display: block; border-radius: 15px; overflow: hidden;"><img src="https://files.catbox.moe/k4dtyg.jpg" style="width: 100%; display: block;"></a>`;
    container.appendChild(ad2);
}
meusBtn.onclick = (e) => {
  e.preventDefault();
  const meuID = localStorage.getItem('usuarioID');
  
  // Filtra comparando EXATAMENTE com o campo 'dono' do seu banco
  const meusAprovados = todosGrupos.filter(g => {
      return String(g.dono).trim() === String(meuID).trim();
  });

  if (meusAprovados.length === 0) {
      window.showAlert('Nenhum grupo encontrado para o seu ID. Verifique se o ADM j√° aprovou!');
  } else {
      document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
      renderizarGrupos(meusAprovados, true); 
      if(menu) menu.classList.remove('open');
      window.scrollTo({top: 0, behavior: 'smooth'});
  }
};



window.copiarPixManual = async function(codigo, botao) {
    try {
        await navigator.clipboard.writeText(codigo);
        const textoOriginal = botao.textContent;
        botao.textContent = '‚úÖ Copiado!';
        botao.style.background = '#27ae60';
        setTimeout(() => {
            botao.textContent = textoOriginal;
            botao.style.background = '';
        }, 2000);
    } catch (err) {
        showAlert('Erro ao copiar. Tente selecionar o c√≥digo manualmente.');
    }
};

// ===== L√ìGICA DE AN√öNCIO ALEAT√ìRIO (50% CHANCE) ===== //
const popupAnuncio = document.getElementById('popup-anuncio');
const closePopupBtn = document.getElementById('close-popup-btn');
const popupLink = document.getElementById('popup-link-dinamico');
const popupImg = document.getElementById('popup-img-dinamica');

const meusAnuncios = [
    {
        link: "https://br.shp.ee/5q1d37e?smtt=0.0.9",
        foto: "https://files.catbox.moe/xjuhw5.png"
    },
    {
        link: "https://soupopular.net/ref/bagau",
        foto: "https://i.postimg.cc/FKZDbmb7/k4dtyg.png"
    }
];

function gerenciarAnuncio() {
    if (Math.random() <= 0.5) { 
        const sorteado = meusAnuncios[Math.floor(Math.random() * meusAnuncios.length)];
        popupLink.href = sorteado.link;
        popupImg.src = sorteado.foto;
        popupAnuncio.style.display = 'flex';
    }
}

closePopupBtn.addEventListener('click', () => { popupAnuncio.style.display = 'none'; });
window.addEventListener('load', gerenciarAnuncio);

// ================== INICIALIZA√á√ÉO DE EVENTOS (MANTIDO) ================== //

const comprarVipBtn = document.getElementById('comprarVipBtn');

// O evento agora s√≥ abre o modal de Pix
comprarVipBtn.addEventListener("click", (e) => {
  e.preventDefault();
  vipModal.style.display = "flex";
  menu.classList.remove("open");
});

// Outros Eventos 
document.getElementById('menuBtn').addEventListener('click', () => {
    menu.classList.add('open');
    document.getElementById('menuBtn').style.opacity = '0'; // Esconde o bot√£o
    document.getElementById('menuBtn').style.pointerEvents = 'none'; // Desativa o clique enquanto aberto
});

document.getElementById('closeBtn').addEventListener('click', () => {
    menu.classList.remove('open');
    document.getElementById('menuBtn').style.opacity = '1'; // Mostra o bot√£o de volta
    document.getElementById('menuBtn').style.pointerEvents = 'auto'; // Reativa o clique
});

document.querySelectorAll('.cat-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const cat = btn.dataset.cat.toLowerCase();
    
    let listaFiltrada = (cat === 'todos') 
        ? todosGrupos 
        : todosGrupos.filter(g => g.categoria?.toLowerCase() === cat);

    renderizarGrupos(ordenarGrupos(listaFiltrada), false);
  });
});

fecharVipIcon.onclick = () => { vipModal.style.display = 'none'; };
fecharVipBtn.onclick = () => { vipModal.style.display = 'none'; };

// ABRIR MODAL ENVIAR GRUPO (RESTAURA O SALVAR POR PADR√ÉO)
window.abrirModalEnvio = function() {
  const modal = document.getElementById('modalEnvioGrupo');
  const btnSalvar = document.getElementById('salvarGrupo');
  
  // Reseta o Modal para modo de ENVIO
  modal.style.display = 'flex';
  modal.querySelector('h3').textContent = "Enviar Grupo";
  btnSalvar.textContent = "ENVIAR GRUPO";
  
  // Limpa os campos
  document.getElementById('grupoNome').value = '';
  document.getElementById('grupoLink').value = '';
  document.getElementById('grupoDescricao').value = ''; 
  document.getElementById('grupoCategoria').value = '';
  document.getElementById('grupoVipCodigo').value = '';
  document.getElementById('previewFoto').src = 'https://files.catbox.moe/9qdwuz.webp';
  document.getElementById('msg-acordando').style.display = 'none';
  document.getElementById('mensagemEnvio').style.display = 'none';

  // Define a fun√ß√£o de salvar como sendo a de NOVO grupo
  btnSalvar.onclick = () => window.salvarNovoGrupo();
  
  if(typeof menu !== 'undefined') menu.classList.remove('open');
};

// Vincula o bot√£o antigo do menu lateral tamb√©m
if(enviarBtn) enviarBtn.onclick = (e) => { e.preventDefault(); abrirModalEnvio(); };


// Fun√ß√£o para carregar o Adsterra apenas sob demanda
function carregarAdsterra() {
  if (!document.getElementById('adsterra-script')) {
    const adScript = document.createElement('script');
    adScript.id = 'adsterra-script';
    adScript.src = "https://pl28642215.effectivegatecpm.com/b9/7f/04/b97f0402af5fa803ef8d137e4050caf4.js";
    document.body.appendChild(adScript);
  }
}

// TERMOS DE USO
document.getElementById('termosLink').onclick = (e) => {
  e.preventDefault();
  
  // Chama o an√∫ncio do Adsterra apenas ao clicar aqui
  carregarAdsterra();

  modalTitulo.textContent = "Termos de Uso";
  modalTexto.innerHTML = `
    <p>Bem-vindo ao nosso site de grupos WhatsApp. Ao utilizar este site, voc√™ concorda com os seguintes termos:</p>
    <ul>
      <li>Voc√™ √© respons√°vel por todo o conte√∫do que enviar.</li>
      <li>N√£o √© permitido enviar conte√∫do ilegal ou ofensivo.</li>
      <li>O site n√£o se responsabiliza pelos grupos externos.</li>
      <li>Direitos reservados ¬© 2024 - 2030.</li>
    </ul>
  `; 
  modalTermos.style.display = "flex";
};

// POL√çTICA DE PRIVACIDADE
document.getElementById('privacidadeLink').onclick = (e) => {
  e.preventDefault();

  // Chama o an√∫ncio do Adsterra apenas ao clicar aqui
  carregarAdsterra();
  
  modalTitulo.textContent = "Pol√≠tica de Privacidade";
  modalTexto.innerHTML = `
    <p>Esta Pol√≠tica de Privacidade explica como coletamos e usamos os dados dos usu√°rios em nosso site.</p>
    <ul>
      <li>Coletamos apenas informa√ß√µes necess√°rias para o funcionamento do site, como seu identificador √∫nico (usuarioID), cliques nos grupos e visitas ao site.</li>
      <li>O usuarioID √© armazenado no seu navegador via localStorage e n√£o cont√©m dados pessoais identific√°veis.</li>
      <li>Os dados de cliques e visitas s√£o armazenados no Firebase apenas para exibir estat√≠sticas do site.</li>
      <li>N√£o compartilhamos seus dados com terceiros.</li>
      <li>Voc√™ pode limpar os dados do seu navegador a qualquer momento, removendo seu usuarioID e hist√≥rico local.</li>
    </ul>
    <p>Ao continuar usando o site, voc√™ concorda com esta pol√≠tica.</p>
  `;
  modalTermos.style.display = "flex";
};

closeModalTermos.onclick = () => modalTermos.style.display = "none";

// === L√ìGICA DO HEADER (MOSTRAR/ESCONDER) ===
let lastScrollTop = 0;
const meuHeader = document.querySelector('header');

window.addEventListener("scroll", function() {
   let st = window.pageYOffset || document.documentElement.scrollTop;
   
   // Se estiver no topo da p√°gina
   if (st <= 10) {
       meuHeader.classList.add('header-visible');
   } 
   // Se rolar para baixo, esconde
   else if (st > lastScrollTop) {
       meuHeader.classList.remove('header-visible');
   } 
   // Se rolar para cima, mostra
   else {
       meuHeader.classList.add('header-visible');
   }
   lastScrollTop = st <= 0 ? 0 : st;
}, false);

// For√ßar aparecer ao carregar
document.addEventListener('DOMContentLoaded', () => {
    meuHeader.classList.add('header-visible');
});


// ================== INICIAR ================== //

// 1. Crie a fun√ß√£o showAlert aqui dentro (no final do script)
window.showAlert = function(mensagem) {
  document.getElementById('customAlertMessage').textContent = mensagem;
  document.getElementById('customAlert').style.display = 'flex';
};

// Faz a barrinha de navega√ß√£o do VIP deslizar
const carrosselVip = document.getElementById('carrossel-pagamento');
const indicadorVip = document.getElementById('indicador-scroll');

if(carrosselVip && indicadorVip) {
    carrosselVip.addEventListener('scroll', () => {
        const larguraTotal = carrosselVip.scrollWidth - carrosselVip.clientWidth;
        const posicaoAtual = carrosselVip.scrollLeft;
        // Ajusta a posi√ß√£o do indicador amarelo proporcionalmente
        const deslocamento = (posicaoAtual / larguraTotal) * 30;
        indicadorVip.style.left = deslocamento + 'px';
    });
}

carregarGrupos();
</script>

<div id="customAlert" class="modal" style="display:none; z-index: 10000;">
  <div class="modal-content" style="border: 2px solid #b78cff; padding: 30px;">
    <h3 style="color: #b78cff;">Aviso</h3>
    <p id="customAlertMessage" style="margin: 15px 0; color: #333; font-weight: 500;"></p>
    <button onclick="document.getElementById('customAlert').style.display='none'" 
            style="background: #b78cff; border: none; padding: 10px 30px; color: white; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 16px;">
      OK
    </button>
  </div>
</div>

<script>
function copiarECaminhar() {
    const codigo = "DLN60488006165";
    const linkConvite = "https://www.tiktok.com/d/4/ZS91q1HKdapRv-ki0E3/";

    // Copia o c√≥digo para o celular do usu√°rio
    navigator.clipboard.writeText(codigo).then(() => {
        // Usa o seu sistema de alerta roxo
        if(window.showAlert) {
            window.showAlert("‚úÖ C√≥digo Copiado! Baixe o app e cole o c√≥digo para ganhar seu b√¥nus.");
        } else {
            alert("‚úÖ C√≥digo Copiado!");
        }
        
        // Abre o link do TikTok ap√≥s 1.5 segundos
        setTimeout(() => {
            window.open(linkConvite, '_blank');
        }, 1500);
    }).catch(err => {
        window.open(linkConvite, '_blank');
    });
}
</script>

<div id="confirmDeleteModal" class="modal" style="display:none; z-index: 11000;">
  <div class="modal-content" style="border: 2px solid #e74c3c; padding: 30px;">
    <h3 style="color: #e74c3c;">Aviso</h3>
    <p style="margin: 15px 0; color: #333; font-weight: 500;">Deseja excluir esse grupo?</p>
    <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
      <button id="confirmBtnSim" style="background: #e74c3c; border: none; padding: 10px 25px; color: white; border-radius: 12px; cursor: pointer; font-weight: bold;">Sim</button>
      <button id="confirmBtnNao" style="background: #ccc; border: none; padding: 10px 25px; color: #333; border-radius: 12px; cursor: pointer; font-weight: bold;">N√£o</button>
    </div>
  </div>
</div>

</body>
</html>
